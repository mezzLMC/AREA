"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[3873],{3637:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>c,default:()=>u,frontMatter:()=>r,metadata:()=>i,toc:()=>o});const i=JSON.parse('{"id":"technical/7service_breakdown/5fields","title":"Fields","description":"Fields are the parameters that can be used to configure an action. They are used to define the behavior of the action and can be used to customize the action to the user\'s needs. On the frontend and mobile app, fields are used to generate forms that the user can fill out to configure the action based on the type of each field.","source":"@site/docs/technical/7service_breakdown/5fields.md","sourceDirName":"technical/7service_breakdown","slug":"/technical/7service_breakdown/5fields","permalink":"/AREA/docs/technical/7service_breakdown/5fields","draft":false,"unlisted":false,"editUrl":"https://github.com/EpitechPromo2027/B-DEV-500-STG-5-1-area-mohamed.mazouz/edit/main/docs/technical/7service_breakdown/5fields.md","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"sidebar_position":5},"sidebar":"tutorialSidebar","previous":{"title":"Reaction","permalink":"/AREA/docs/technical/7service_breakdown/4reaction"},"next":{"title":"Enrichments","permalink":"/AREA/docs/technical/7service_breakdown/6enrichments"}}');var s=n(4848),a=n(8453);const r={sidebar_position:5},c="Fields",l={},o=[{value:"Structure",id:"structure",level:2},{value:"Implementation",id:"implementation",level:2}];function d(e){const t={code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.header,{children:(0,s.jsx)(t.h1,{id:"fields",children:"Fields"})}),"\n",(0,s.jsx)(t.p,{children:"Fields are the parameters that can be used to configure an action. They are used to define the behavior of the action and can be used to customize the action to the user's needs. On the frontend and mobile app, fields are used to generate forms that the user can fill out to configure the action based on the type of each field."}),"\n",(0,s.jsx)(t.h2,{id:"structure",children:"Structure"}),"\n",(0,s.jsx)(t.p,{children:"Each Field implements the following structure:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-ts",children:'export type FieldTypes = "hour" | "date" | "text_field" | "select_field";\n\nexport interface SelectFieldValue {\n    name: string;\n    value: string;\n}\n\nexport interface Field {\n    name: string;\n    id: string;\n    type: FieldTypes;\n    values?: SelectFieldValue[];\n}\n'})}),"\n",(0,s.jsx)(t.h2,{id:"implementation",children:"Implementation"}),"\n",(0,s.jsx)(t.p,{children:"Here is an example of a field generation implementation:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-ts",children:'class PlaylistUpdatedAction extends AreaAction {\n\n    description = "Triggers when a playlist is updated";\n    name = "Playlist Updated";\n    id = "playlist_updated";\n    enrichments : Enrichment[] = [...];\n\n    static getDifference(trackedPlaylist: TrackedPlaylist, currentPlaylist: Playlist<Track>): [string[], string[]] {...}\n    static async updatePlaylistState(trackedPlaylist: TrackedPlaylist, currentPlaylist: Playlist<Track>) {...}\n    static async getPlaylistWithTracks(id: string, spotifyApi: SpotifyApi) {...}\n    async processPlaylistDifference(trackedPlaylist: TrackedPlaylist) {...}\n    static async addToQueue(api: SpotifyApi, trackId: string, trackedPlaylist: TrackedPlaylist) {...}\n    async add(userId: number, fields: Record<string, string>) : Promise<number> {...}\n    async poll(): Promise<void> {...}\n\n    static async getOauth(userId: number) {\n        const oauth = await OAuthRepository.findOne(and(eq(authServices.service, "spotify"), eq(authServices.userId, userId)));\n        return oauth;\n    }\n\n    async generateFields(userId: number) {\n        const oauth = await PlaylistUpdatedAction.getOauth(userId);\n        if (!oauth) return [];\n        const spotifyApi = getSpotifyApiInstance(oauth);\n        const playlists = await spotifyApi.currentUser.playlists.playlists();\n        const playlistFields : SelectFieldValue[] = playlists.items.map(({id, name}) => ({ name, value: id }));\n        const res : Field[] = [\n            {\n                name: "Choose a playlist:",\n                id: "playlistId",\n                type: "select_field",\n                values: playlistFields,\n            },\n        ];\n        return res;\n    }\n}\n'})})]})}function u(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453:(e,t,n)=>{n.d(t,{R:()=>r,x:()=>c});var i=n(6540);const s={},a=i.createContext(s);function r(e){const t=i.useContext(a);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),i.createElement(a.Provider,{value:t},e.children)}}}]);